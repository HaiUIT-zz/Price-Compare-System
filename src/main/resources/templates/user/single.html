<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>

    <!-- jQuery -->
    <script
            src="http://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
            crossorigin="anonymous"></script>
    <!-- //jQuery -->
    <title>Electronic Store a Ecommerce Online Shopping Category Bootstrap Responsive Website Template | Single Page ::
        w3layouts</title>
    <!-- for-mobile-apps -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="keywords" content="Electronic Store Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template,
	SmartPhone Compatible web template, free web designs for Nokia, Samsung, LG, SonyEricsson, Motorola web design"/>
    <script type="application/x-javascript"> addEventListener("load", function () {
        setTimeout(hideURLbar, 0);
    }, false);

    function hideURLbar() {
        window.scrollTo(0, 1);
    } </script>
    <!-- //for-mobile-apps -->
    <!-- Custom Theme files -->
    <link rel="stylesheet" th:href="@{/user/css/bootstrap.css}" type="text/css" media="all"/>
    <link rel="stylesheet" th:href="@{/user/css/style.css}" type="text/css" media="all"/>
    <link rel="stylesheet" th:href="@{/user/css/fasthover.css}" type="text/css" media="all"/>
    <!-- //Custom Theme files -->
    <!-- font-awesome icons -->
    <link rel="stylesheet" th:href="@{/user/css/font-awesome.css}"/>
    <!-- //font-awesome icons -->

    <!-- web fonts -->
    <link href='//fonts.googleapis.com/css?family=Glegoo:400,700' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic'
          rel='stylesheet' type='text/css'>
    <!-- //web fonts -->

    <!-- start-smooth-scrolling -->
    <script type="text/javascript">
        jQuery(document).ready(function ($) {
            $(".scroll").click(function (event) {
                event.preventDefault();
                $('html,body').animate({scrollTop: $(this.hash).offset().top}, 1000);
            });
        });
    </script>
    <!-- //end-smooth-scrolling -->

    <!--krajee-->
    <!-- default styles -->
    <link th:href="@{/krajee/star-rating.css}" media="all" rel="stylesheet" type="text/css"/>

    <!-- optionally if you need to use a theme, then include the theme CSS file as mentioned below -->
    <link th:href="@{/krajee/krajee-svg/theme.css}" media="all" rel="stylesheet" type="text/css"/>

    <!-- CSS file -->
    <link rel="stylesheet" th:href="@{/EasyAutocompleteV135/easy-autocomplete.min.css}">

    <!-- Additional CSS Themes file - not required-->
    <link rel="stylesheet" th:href="@{/EasyAutocompleteV135/easy-autocomplete.themes.min.css}">
    <!--EasyComplete-->
    <!--MorrisJS Chart-->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
    <!--End of MorrisJS Chart-->

</head>
<body>
<!-- header -->
<div class="header" id="home1">
    <div class="container">
        <div class="w3l_logo">
            <h1><a th:href="@{/}">Price Comparison<span>Your profit. Our value.</span></a></h1>
        </div>
    </div>
</div>
<!-- //header -->
<!-- navigation -->
<div class="navigation">
    <div class="container">
        <nav class="navbar navbar-default">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="collapse navbar-collapse" id="bs-megadropdown-tabs">
                <ul class="nav navbar-nav">
                    <li><a th:href="@{/}" class="act">Home</a></li>
                    <!-- Mega Menu -->
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Products <b class="caret"></b></a>
                        <ul class="dropdown-menu multi-column columns-3">
                            <div class="row">
                                <div class="col-sm-3">
                                    <ul class="multi-column-dropdown">
                                        <h6>Mobiles</h6>
                                        <li><a th:href="@{/mobilephones/1}">Mobile Phones</a></li>
                                    </ul>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </ul>
                    </li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="mail.html">Mail Us</a></li>
                    <li>
                        <div class="navbar-header nav_2">
                            <button type="button" class="navbar-toggle collapsed navbar-toggle1" data-toggle="collapse"
                                    data-target="#bs-megadropdown-tabs">
                                <span class="sr-only">Toggle navigation</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                        </div>
                    </li>

                </ul>
            </div>
        </nav>
    </div>
</div>
<!-- //navigation -->
<!-- breadcrumbs -->
<div class="breadcrumb_dress">
    <div class="container">
        <ul>
            <li><a th:href="@{/}"><span class="glyphicon glyphicon-home" aria-hidden="true"></span>Home</a> <i>/</i>
            </li>
            <li><a th:href="@{/mobilephones}"><span class="fa fa-mobile" aria-hidden="true"></span>Mobile Phones</a> <i>/</i>
            </li>
            <li th:inline="text">[[${product.name}]]</li>

        </ul>
    </div>
</div>
<!-- //breadcrumbs -->

<div class="container" style="margin-top: 20px">
    <form class="form-inline" th:action="@{/mobilephones/find}" method="POST">
        <div class="form-group">
            <input type="text" id="Search" name="Search" placeholder="Search...">
        </div>
        <div class="form-group">
            <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"
                                                                aria-hidden="true"></span></button>
        </div>
    </form>
</div>
<!-- single -->
<div class="single">
    <div class="container">
        <div class="col-md-4 single-left">
            <div class="flexslider">
                <div><img th:src="${product.image}" data-imagezoom="true" class="img-responsive" alt=""></div>
            </div>
            <!-- flexslider -->
            <script defer th:src="@{/user/js/jquery.flexslider.js}"></script>
            <link rel="stylesheet" th:href="@{/user/css/flexslider.css}" type="text/css" media="screen"/>
            <script>
                // Can also be used with $(document).ready()
                $(window).load(function () {
                    $('.flexslider').flexslider({
                        animation: "slide",
                        controlNav: "thumbnails"
                    });
                });
            </script>
            <!-- flexslider -->

        </div>
        <div class="col-md-8 single-right">
            <h1 th:inline="text">[[${product.name}]]</h1><br>

            <div class="description" style="padding: 20px">
                <label style="margin:3px" th:inline="text"><i class="fa fa-eye" aria-hidden="true"></i> Visit <strong>[[${product.visit_count}]]</strong></label><br>
                <label style="margin:3px" th:inline="text"><i class="fa fa-star" aria-hidden="true"></i> Rating <strong>[[${product.rating}]]</strong></label><br>
                <button style="margin:3px" type="button" class="btn btn-primary" data-toggle="modal" data-target="#votingModal"
                        data-whatever="@mdo">Vote
                </button>

                <div class="modal fade" id="votingModal" tabindex="-1" role="dialog" aria-labelledby="votingModalLabel">
                    <div class="modal-dialog modal-sm" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title" id="votingModalLabel">Rating</h4>
                            </div>
                            <div class="modal-body">
                                <form>
                                    <div class="form-group">
                                        <label for="emailInput" class="control-label">Email:</label>
                                        <input id="emailInput" type="email" required class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label for="my_rating" class="control-label">Rate:</label>
                                        <div>
                                            <input id="my_rating" name="my_rating" class="rating rating-loading"
                                                   data-size="xs" data-min="0" data-max="5" data-step="1">
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button id="sendVoteButton" type="button" class="btn btn-primary">Send vote</button>
                            </div>
                        </div>
                    </div>
                </div>

                <script>

                </script>

            </div>
        </div>
        <div class="clearfix"></div>
    </div>
</div>
<div class="additional_info">
    <div class="container">
        <div aria-controls="tab_item-1" class="resp-tab-item" role="tab"><span>Compare Price</span></div>
        <div id="agents-chart"></div>
        <div class="sap_tabs">
            <div id="horizontalTab1" style="display: block; width: 100%; margin: 0px;">
                <ul>
                    <li class="resp-tab-item" aria-controls="tab_item-0" role="tab"><span>Agents</span></li>

                    <li class="resp-tab-item" aria-controls="tab_item-2" role="tab"><span>Rating</span></li>
                </ul>

                <div class="tab-1 resp-tab-content additional_info_grid" aria-labelledby="tab_item-0">
                    <h3>List of agents available: </h3>
                    <div class="table-responsive">
                        <table class="table table-hover table-striped">
                            <thead>
                            <tr>
                                <th>#</th>
                                <th>Agent</th>
                                <th>Price</th>
                                <th>Location</th>
                            </tr>
                            </thead>
                            <tbody>
                            <th:block th:each="productAgent, iter : ${productAgents}">
                                <tr>
                                    <td th:text="${iter.index+1}"></td>
                                    <td><a th:href="${productAgent.url}" th:text="${productAgent.agent.name}"></a></td>
                                    <td th:inline="text">[[${productAgent.price}]] VND</td>
                                    <td th:inline="text">[[${productAgent.location}]]</td>
                                </tr>
                            </th:block>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="tab-2 resp-tab-content additional_info_grid" aria-labelledby="tab_item-2">
                    <h3>Rating</h3>
                    <div class="table-responsive">
                        <table class="table table-hover table-striped">
                            <thead>
                            <tr>
                                <th>#</th>
                                <th>Agent</th>
                                <th>Price</th>
                            </tr>
                            </thead>
                            <tbody>
                            <th:block th:each="_voting, iter : ${_votings}">
                                <tr>
                                    <td th:text="${iter.index+1}"></td>
                                    <td th:text="${_voting.email}"></td>
                                    <td th:inline="text">[[${_voting.rating}]] <i class="fa fa-star"
                                                                                  aria-hidden="true"></i></td>
                                </tr>
                            </th:block>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
        <script th:src="@{/user/js/easyResponsiveTabs.js}" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $('#horizontalTab1').easyResponsiveTabs({
                    type: 'default', //Types: default, vertical, accordion
                    width: 'auto', //auto or any width like 600px
                    fit: true   // 100% fit in a container
                });
            });
        </script>

    </div>
</div>
<!-- Related Products -->
<div class="w3l_related_products">
    <div class="container">
        <h3>Related Products</h3>
        <ul id="flexiselDemo2">
            <th:block th:each="relatedProduct : ${relatedProducts}">
                <li>

                    <div class="w3l_related_products_grid">
                        <div class="agile_ecommerce_tab_left mobiles_grid">
                            <div class="hs-wrapper hs-wrapper3">
                                <img th:src="@{${relatedProduct.image}}" alt=" " class="img-responsive"/>
                                <img th:src="@{${relatedProduct.image}}" alt=" " class="img-responsive"/>
                                <img th:src="@{${relatedProduct.image}}" alt=" " class="img-responsive"/>
                                <img th:src="@{${relatedProduct.image}}" alt=" " class="img-responsive"/>
                                <img th:src="@{${relatedProduct.image}}" alt=" " class="img-responsive"/>
                                <div class="w3_hs_bottom">
                                    <div class="flex_ecommerce">
                                        <a th:href="@{'/mobilephones/get/'+${relatedProduct.id}}"><span
                                                class="glyphicon glyphicon-eye-open" aria-hidden="true"></span></a>
                                    </div>
                                </div>
                            </div>
                            <h5><a href="single.html" th:inline="text">[[${relatedProduct.name}]]</a></h5>
                            <div class="simpleCart_shelfItem">
                                <p th:inline="text"><i class="fa fa-location-arrow" aria-hidden="true"></i>
                                    [[${relatedProduct.agent_count}]]</p>
                            </div>
                        </div>
                    </div>

                </li>
            </th:block>
        </ul>

        <script type="text/javascript">
            $(window).load(function () {
                $("#flexiselDemo2").flexisel({
                    visibleItems: 4,
                    animationSpeed: 1000,
                    autoPlay: true,
                    autoPlaySpeed: 3000,
                    pauseOnHover: true,
                    enableResponsiveBreakpoints: true,
                    responsiveBreakpoints: {
                        portrait: {
                            changePoint: 480,
                            visibleItems: 1
                        },
                        landscape: {
                            changePoint: 640,
                            visibleItems: 2
                        },
                        tablet: {
                            changePoint: 768,
                            visibleItems: 3
                        }
                    }
                });

            });
        </script>
        <script type="text/javascript" th:src="@{/user/js/jquery.flexisel.js}"></script>
    </div>
</div>
<!-- //Related Products -->
<!-- newsletter -->
<div class="newsletter">
    <div class="container">
        <div class="col-md-6 w3agile_newsletter_left">
            <h3>Newsletter</h3>
            <p> How to get the latest of the good deal? Let we do that! </p>
        </div>
        <div class="col-md-6 w3agile_newsletter_right">
            <form action="#" method="post">
                <input type="email" name="Email" placeholder="Email" required="">
                <input type="submit" value=""/>
            </form>
        </div>
        <div class="clearfix"></div>
    </div>
</div>

<!-- //newsletter -->
<!-- footer -->
<div class="footer">
    <div class="container">
        <div class="w3_footer_grids">
            <div class="col-md-3 w3_footer_grid">
                <h3>Contact</h3>
                <p>Don't afraid to contact us, very pleased to get your idea or anything ^^.</p>
                <ul class="address">
                    <li><i class="glyphicon glyphicon-map-marker" aria-hidden="true"></i> H&H team, SE UIT
                        <span>HCMC.</span></li>
                    <li><i class="glyphicon glyphicon-envelope" aria-hidden="true"></i><a
                            href="mailto:info@example.com">haiuit@gmail.com</a></li>
                    <li><i class="glyphicon glyphicon-earphone" aria-hidden="true"></i>+84 38 7777 7777</li>
                </ul>
            </div>
            <div class="col-md-3 w3_footer_grid">
                <h3>Information</h3>
                <ul class="info">
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="mail.html">Contact Us</a></li>
                </ul>
            </div>
            <div class="col-md-3 w3_footer_grid">
                <h3>Category</h3>
                <ul class="info">
                    <li><a href="products.html">Mobiles</a></li>
                </ul>
            </div>
            <div class="col-md-3 w3_footer_grid">
                <h3>Profile</h3>
                <ul class="info">
                    <li><a href="index.html">Home</a></li>
                </ul>
                <h4>Follow Us</h4>
                <div class="agileits_social_button">
                    <ul>
                        <li><a href="#" class="facebook"> </a></li>
                        <li><a href="#" class="twitter"> </a></li>
                        <li><a href="#" class="google"> </a></li>
                        <li><a href="#" class="pinterest"> </a></li>
                    </ul>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
    <div class="footer-copy">
        <div class="footer-copy1">
            <div class="footer-copy-pos">
                <a href="#home1" class="scroll"><img th:src="@{/user/images/arrow.png}" alt=" " class="img-responsive"/></a>
            </div>
        </div>
        <div class="container">
            <p>&copy; 2017 Price Comparison. All rights reserved | Design by <a href="#">Team H&H</a></p>
        </div>
    </div>
</div>
<!-- //footer -->

<!-- for bootstrap working -->
<script type="text/javascript" th:src="@{/user/js/bootstrap-3.1.1.min.js}"></script>
<!-- //for bootstrap working -->

<script type="text/javascript"
        th:src="@{https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.min.js}"></script>
<script type="text/javascript" th:src="@{https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js}"></script>

<!-- important mandatory libraries -->
<script th:src="@{/krajee/star-rating.js}" type="text/javascript"></script>

<!-- optionally if you need to use a theme, then include the theme JS file as mentioned below -->
<script th:src="@{/krajee/krajee-svg/theme.js}"></script>

<!---EasyComplete->
<!-- JS file -->
<script th:src="@{/EasyAutocompleteV135/jquery.easy-autocomplete.min.js}"></script>

<!-- cart-js -->
<script th:src="@{/user/js/minicart.js}"></script>
<!--MorrisJS Chart-->
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>
<!--End of MorrisJS Chart-->
<!-- //cart-js -->
<th:block th:if="${agentPrices}">
    <script th:inline="javascript">
        var agentPrices = /*[[${agentPrices}]]*/ null;
        // var _data = /*[[${agentPrices}]]*/ null;
        var _data = [{"agent": "Viễn Thông A", "price": 27000000}, {
            "agent": "www.fptshop.com.vn",
            "price": 20000000
        }, {"agent": "www.vienthonga.vn", "price": 24000000}, {"agent": "www.thegioididong.com", "price": 22000000}];
        console.log(_data);
        Morris.Bar({
            element: 'agents-chart',
            barSizeRatio: 0.1,
            data: JSON.parse(agentPrices),
            xkey: 'agent',
            ykeys: ['price'],
            labels: ['price']
        });
    </script>
</th:block>

<script th:inline="javascript">
    /*<![CDATA[*/
    var product_id = /*[[${product.id}]]*/ null;
    $("#sendVoteButton").click(function () {
        var email = $("#emailInput").val();
        var star = $("#my_rating").val();
        console.log("email");
        console.log(email);
        console.log("star");
        console.log(star);
        console.log('product_id');
        console.log(product_id);
        $.ajax({
            type: "POST",
            url: '/processRating',
            data: {'star': star, 'email': email, 'product_id': product_id},
            success: function (result) {
                console.log(result);
            },
            dataType: JSON
        });
        $("#votingModal ").modal('toggle');
        location.reload();
    });
</script>
<th:block>
    <script>
        var options = {
            url: "/allProducts",
            getValue: "name",
            list: {
                match: {
                    enabled: true
                },
                maxNumberOfElements: 10,
                showAnimation: {
                    type: "slide",
                    time: 300
                },
                hideAnimation: {
                    type: "slide",
                    time: 300
                }
            },
            theme: "round",
            template: {
                type: "links",
                fields: {
                    link: "urlDetailProduct"
                }
            }
        };
        $("input[name='Search']").easyAutocomplete(options);
    </script>
</th:block>
</body>
</html>